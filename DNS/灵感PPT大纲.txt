# DNS解析服务器的原理与过程
## DNS简介
### DNS是域名解析系统(Domain Name System)的缩写,是因特网上将域名和IP地址互相映射的一个分布式数据库。
### DNS协议运行在UDP协议之上,使用端口号53。
### DNS的分布数据库是以域名为索引的,每个域名实际上就是一棵很大的逆向树中路径。
## DNS查询方式
### 递归查询:如果A请求B,那么B作为请求的接收者一定要给A想要的答案。
### 迭代查询:如果接收者B没有请求者A所需要的准确内容,接收者B将告诉请求者A,如何去获得这个内容,但是自己并不去发出请求。
## DNS域名解析过程
### 首先搜索浏览器的DNS缓存,缓存中维护一张域名与IP地址的对应表。
### 如果没有命中,则继续搜索操作系统的DNS缓存。
### 如果在操作系统的DNS缓存中没有命中,则操作系统将域名发送至本地DNS服务器,本地DNS服务器采用递归查询自己的DNS缓存,查找成功则返回结果。
### 本地DNS服务器的DNS缓存没有命中,则本地DNS服务器向上级DNS服务器进行迭代查询。
### 本地DNS服务器向根DNS服务器发起请求,根DNS服务器返回顶级DNS服务器的地址给本地服务器。
### 本地DNS服务器拿到这个顶级DNS服务器的地址后,就向其发起请求,获取权限DNS服务器的地址。
### 本地DNS服务器根据权限DNS服务器的地址向其发起请求,最终得到该域名对应的IP地址。
### 本地DNS服务器将得到的IP地址返回给操作系统,同时自己将IP地址缓存起来。
### 操作系统将IP地址返回给浏览器,同时自己也将IP地址缓存起。
## DNS域名解析过程分析
### 首先检查浏览器缓存中是否缓存过该域名对应的IP地址。
### 如果在浏览器缓存中没有找到IP,则继续在系统缓存中查找。
### 如果在系统缓存中没有找到IP,则向本地DNS服务器发起域名解析请求。
### 本地DNS服务器向根DNS服务器发起请求,获取顶级DNS服务器的地址。
### 本地DNS服务器向顶级DNS服务器发起请求,获取权限DNS服务器的地址。
### 本地DNS服务器向权限DNS服务器发起请求,最终得到该域名对应的IP地址。
### 本地DNS服务器将得到的IP地址返回给操作系统,同时自己将IP地址缓存起来。
### 操作系统将IP地址返回给浏览器,同时自己也将IP地址缓存起来。
## DNS域名解析记录类型
### A记录:用来指定域名对应的IP地址。
### MX记录:用来将某个域名下的邮件服务器指向自己的Mail Server。
### CNAME记录:用来为一个域名设置一个或者多个别名。
### NS记录:为某个域名指定DNS解析服务器。
### TXT记录:为某个主机名或域名设置说明。
